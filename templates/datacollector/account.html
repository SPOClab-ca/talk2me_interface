{% extends "datacollector/base.html" %}

{% block title %}{{ website_name }} - Account Settings{% endblock%}

{% block auth_user %}
    {% if is_authenticated %}
        Logged in as {{ user.username }} (<a href="/datacollector/logout">logout</a>)
    {% else %}
        <a href="/datacollector/login">Login</a> | <a href="/datacollector/register">New User</a>
    {% endif %}
{% endblock %}

{% block content %}

<h1>Account Settings</h1>
<hr />

{% if form_errors %}
<div class="bs-callout bs-callout-danger">
    <strong>The form could not be submitted. Please correct the following error{{ form_errors|pluralize }}:</strong>
    <ul>
    {% for err in form_errors %}
        <li>{{ err }}</li>
    {% endfor %}
    </ul>
</div>
{% endif %}

{% if save_confirm %}
<div class="bs-callout bs-callout-info">
    <strong>Changes saved successfully.</strong>
</div>
{% endif %}

<h3>Email Settings</h3>

<form action="" method="POST">
    {% csrf_token %}
    
    <div>
        E-mail address: <input class="form-control" id='email_address' name='email_address' style='width: 250px;' type='text' value="{{ form_values.email_address }}">
    </div>
    <br />
    
    <div class="checkbox">
        <label><input id='cb_preference_prizes' name='cb_preference_prizes' type='checkbox'{% if 'cb_preference_prizes' in form_values %} checked='checked'{% endif %} />&nbsp;<strong>I would like to participate in the {{ website_name }} prize draws.</strong> Prize draws of total value of $1,500 over the course of the study will be held monthly, each prize being approximately $20. Completing sessions during the month, and filling out the (optional) usability questionnaire both increase the chances of winning. The winners will be notified on the last day of the month. I understand that if I win, I will be contacted via the e-mail address provided above. My e-mail will not be shared with any third parties or used for commercial purposes.</label>
    </div>
    <br />
    
    <div class="checkbox">
        <label><input id='cb_preference_email_reminders' name='cb_preference_email_reminders' type='checkbox'{% if 'cb_preference_email_reminders' in form_values %} checked='checked'{% endif %} />&nbsp;<strong>I wish to receive scheduled e-mail reminders (e.g., monthly) to complete new sessions on the website (each session takes approximately 15 minutes).</strong> I understand that I can unsubscribe from such communications at any time, either through the "Unsubscribe" link located in each e-mail, or through the website. Requested communications will be sent to my e-mail address, which will not be shared with any third parties or used for commercial purposes.</label>
    </div>
    <div id="detail_preference_email_reminders" style="margin-left: 20px;">
        Frequency: 
        <div class="radio" style="display: inline; margin-left: 10px; margin-bottom: 15px;">
            <label class="radio-inline"><input type="radio" name="radio_email_reminders_freq" value="7"{% if form_values.radio_email_reminders_freq == '7' %} checked="checked"{% endif %} /> Weekly</label>
            <label class="radio-inline"><input type="radio" name="radio_email_reminders_freq" value="30"{% if form_values.radio_email_reminders_freq == '30' %} checked="checked"{% endif %}{% if 'radio_email_reminders_freq' not in form_values %} checked="checked"{% endif %} /> Monthly</label>
            <label class="radio-inline"><input type="radio" name="radio_email_reminders_freq" value="365"{% if form_values.radio_email_reminders_freq == '365' %} checked="checked"{% endif %} /> Annually</label>
        </div>
    </div>
    <br />
    
    <div class="checkbox">
        <label><input id='cb_preference_email_updates' name='cb_preference_email_updates' type='checkbox'{% if 'cb_preference_email_updates' in form_values %} checked='checked'{% endif %} />&nbsp;<strong>I wish to receive electronic communication regarding study outcomes, updates and research publications</strong> based on the data collected as part of this study. I understand that I can unsubscribe from such communications at any time, either through the "Unsubscribe" link located in each e-mail, or through the website. Requested communications will be sent to my e-mail address, which will not be shared with any third parties or used for commercial purposes.</label>
    </div>
    <br />
    
    <button name="btn-save" type="submit" class="btn btn-primary">Save changes</button> <button type="button" class="btn btn-default" onClick="javascript: location.href='/datacollector/';">Cancel</button>
    <br />

<hr />
<h3 style="margin-top: 40px;">Withdrawal</h3>
    
    <p>
    <div class="bs-callout bs-callout-default">
    Please note that withdrawal is an <strong>irreversible</strong> action. If you choose to withdraw, all data collected from you (i.e., sessions, demographics, account information) will be deleted immediately and irreversibly, and you will receive confirmation via e-mail if you provided one. Your account will cease to exist. Your username will be available for registration to anyone else.
    </div>
    
    <div class="checkbox">
        <label><input type="checkbox" id="withdraw_confirm" name="withdraw_confirm" /><strong>I fully understand the effects of this action and want to proceed.</strong> When I press the "Withdraw" button below, my account will be deleted, and I will be logged out of the system.</label>
    </div>
    <br />
    
    <button name="btn-withdraw" type="submit" class="btn btn-danger">Withdraw from study</button> <button type="button" class="btn btn-default" onClick="javascript: location.href='/datacollector/';">Cancel</button>
    </p>
</form>

{% endblock %}
